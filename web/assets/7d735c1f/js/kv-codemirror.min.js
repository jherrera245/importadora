/*!
 * @copyright Copyright &copy; Kartik Visweswaran, Krajee.com, 2014 - 2021
 * @package yii2-editors
 * @version 1.0.1
 *
 * Krajee Codemirror jQuery plugin
 */
!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(window.jQuery)}(function(e){"use strict";var t;t=function(t,o){var r=this;r.$element=e(t),r.options=o,r.init()},t.prototype={constructor:t,init:function(){var e=this;e.editor=CodeMirror.fromTextArea(e.$element[0],e.options),e.disabled=e.$element.attr("disabled"),e.initToolbar()},initToolbar:function(){var t=this,o=t.editor,r=t.$element.closest(".kv-cm-container"),a=r.find(".kv-cm-toolbar"),n=function(e,t){o.commentRange(t,e.from,e.to)};t.disabled||(a.find("[data-tooltips]").tooltip({trigger:"hover"}),a.find("button").on("click",function(){var t=e(this),a={from:o.getCursor(!0),to:o.getCursor(!1)},i=a.from===a.to,c=t.attr("data-action");switch(c){case"undo":o.undo();break;case"redo":o.redo();break;case"selectall":o.execCommand("selectAll");break;case"fullscreen":r.hasClass("fullscreen")?(r.removeClass("fullscreen"),t.removeClass("active")):(r.addClass("fullscreen"),t.addClass("active"));break;default:if(i&&"paste"!==c)break;switch(c){case"copy":case"cut":case"paste":if("paste"!==c){var s=e(document.createElement("textarea")).appendTo("body").css({height:"1px",width:"1px"});s.val(o.getSelection()),s[0].select(),document.execCommand("copy"),s.remove()}else navigator.clipboard.readText().then(function(e){o.getDoc().replaceSelection(e)})["catch"](function(e){window.console.log("Unable to read clipboard contents.",e)});"cut"===c&&o.getDoc().replaceSelection("");break;case"indent":o.execCommand("indentMore");break;case"outdent":o.execCommand("indentLess");break;case"comment":n(a,!0);break;case"format":o.autoFormatRange(a.from,a.to);break;case"uncomment":n(a,!1)}}}))},save:function(){var e=this;e.editor.save()},destroy:function(){var e=this;e.editor.toTextArea(),e.editor=null}},e.fn.kvCodemirror=function(o){var r=Array.apply(null,arguments),a=[];switch(r.shift(),this.each(function(){var n,i=e(this),c=i.data("kvCodemirror"),s="object"==typeof o&&o;c||(n=e.extend(!0,{},e.fn.kvCodemirror.defaults,s,i.data()),c=new t(this,n),i.data("kvCodemirror",c)),"string"==typeof o&&a.push(c[o].apply(c,r))}),a.length){case 0:return this;case 1:return a[0];default:return a}},e.fn.kvCodemirror.defaults={}});